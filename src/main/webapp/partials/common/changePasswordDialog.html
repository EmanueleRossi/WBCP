<!--
    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.
 
    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Lesser General Public License for more details.

    You should have received a copy of the GNU Lesser General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->


<div class="modal-content">
	<div class="modal-header">
		<h2 class="text-center">Cambio password</h2>
	</div>
	<div class="modal-body">
		<form name="form" class="form col-md-12 center-block" ng-submit="doChange()" novalidate>
			<div class="form-group has-feedback"
				 ng-class="(form.$submitted || form.password.$touched) ? (form.password.$valid ? 'has-success' : 'has-error') : ''">
				<input type="password" class="form-control" placeholder="Nuova password" ng-model="password" name="password" minlength="8" required>
				<div ng-show="form.$submitted || form.password.$touched">

					<span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"
						ng-class="form.password.$valid ? 'glyphicon-ok' : 'glyphicon-remove'" />

					<span class="small text-danger" ng-show="form.password.$error.required" >Campo obbligatorio</span>
					<span class="small text-danger" ng-show="form.password.$error.minlength" >la password deve essere lunga almeno 8 caratteri</span>
				</div>
			</div>

			<div class="form-group has-feedback"
				 ng-class="(form.$submitted || form.passwordConfirm.$touched) ?  (form.passwordConfirm.$valid ? 'has-success' : 'has-error') : ''">
				<input type="password" class="form-control" placeholder="Ripeti nuova password" ng-model="passwordConfirm" name="passwordConfirm" required
					   compare-to="user.password">
				<div ng-show="form.$submitted || form.passwordConfirm.$touched">

					<span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"
						ng-class="form.passwordConfirm.$valid ? 'glyphicon-ok' : 'glyphicon-remove'" />
					<span class="small text-danger" ng-show="form.passwordConfirm.$error.required" >Campo obbligatorio</span>
					<span class="small text-danger" ng-show="form.passwordConfirm.$error.compareTo" >
						Il valore inserito non corrisponde a quello del campo precedente
					</span>
				</div>
			</div>
			<br/>

			<div class="text-center">
				<p class="text-danger" ng-bind="errorMessage"></p>
				<p class="text-success" ng-bind="successMessage"></p>
			</div>

			<div class="form-group text-center" data-ng-if="!successMessage">
				<button type="button" class="btn btn-default" ng-click="cancel()">Annulla</button>
				<button class="btn btn-primary" type="submit">Conferma</button>
			</div>

			<div class="form-group text-center" data-ng-if="successMessage">
				<button type="button" class="btn btn-default" ng-click="cancel()">Chiudi</button>
			</div>
		</form>
	</div>
  	<div class="modal-footer"></div>
</div>

